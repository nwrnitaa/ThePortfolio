<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portofolio Model • Elegan Pink</title>
  <meta name="description" content="Portofolio model berdesain elegan bernuansa pink dengan galeri foto yang dapat ditambah, simpan, edit, dan hapus.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --pink-1:#ffd1e6;
      --pink-2:#ff8ec7;
      --pink-3:#ff5ea8;
      --pink-4:#f72585;
      --ink:#2a2231;
    }
    html,body{height:100%}
    body{font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;color:var(--ink)}
    .glass {
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,255,255,0.5));
      box-shadow: 0 10px 30px rgba(244, 63, 94, 0.15);
    }
    .soft-shadow{ box-shadow: 0 8px 25px rgba(247, 37, 133, 0.18); }
    .hero-gradient{
      background: radial-gradient(1200px 500px at 20% -20%, rgba(255, 182, 193, 0.55), transparent 60%),
                  radial-gradient(1200px 600px at 80% -10%, rgba(255, 105, 180, 0.35), transparent 60%),
                  linear-gradient(160deg, #fff0f6 0%, #ffe1ef 45%, #ffd6ea 100%);
    }
    .card-hover{
      transition: transform .35s ease, box-shadow .35s ease, opacity .35s ease;
    }
    .card-hover:hover{ transform: translateY(-6px); box-shadow: 0 16px 40px rgba(244, 63, 94, .22) }
    .btn {
      transition: transform .18s ease, box-shadow .18s ease, background .3s ease, color .3s ease;
      will-change: transform;
    }
    .btn:active { transform: translateY(1px) scale(.99) }
    .fade-in { animation: fadeIn .45s ease both }
    @keyframes fadeIn { from {opacity:0; transform:translateY(4px)} to {opacity:1; transform:none} }
    .ring-pink { box-shadow: 0 0 0 3px rgba(255, 105, 180, .18) inset }
    .scrollbar-slim::-webkit-scrollbar{height:8px;width:8px}
    .scrollbar-slim::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff8ec7,#f72585);border-radius:8px}
    .tooltip {
      position: relative;
    }
    .tooltip:after{
      content: attr(data-tip);
      position:absolute;
      bottom: calc(100% + 8px);
      right: 50%;
      transform: translateX(50%);
      background: #1f2937; color:#fff;
      padding: 6px 10px; font-size: 12px; border-radius: 8px;
      opacity: 0; pointer-events: none; white-space: nowrap; transition: opacity .2s ease, transform .2s ease;
    }
    .tooltip:hover:after{ opacity:1; transform: translateX(50%) translateY(-2px) }
  </style>
  <style>
    /* Animasi maskot muncul lalu hilang */
    #kittyMascot{
      transition: opacity .6s ease, transform .6s ease;
      will-change: opacity, transform;
      z-index: 20;
      filter: drop-shadow(0 8px 16px rgba(244,63,94,.25));
    }
    .kitty-in{opacity:1 !important; transform: translateY(0) !important}
    /* Lambaian tangan */
    @keyframes waveHand{
      0%{transform:translate(150px,125px) rotate(0deg)}
      25%{transform:translate(150px,125px) rotate(18deg)}
      50%{transform:translate(150px,125px) rotate(-10deg)}
      75%{transform:translate(150px,125px) rotate(14deg)}
      100%{transform:translate(150px,125px) rotate(0deg)}
    }
    #kittyMascot svg #hand.wave{animation: waveHand 1s ease-in-out 3}
  </style>
</head>
<body class="hero-gradient min-h-screen">
  <!-- Navigation -->
  <header class="sticky top-0 z-40 backdrop-blur-xl bg-white/60 border-b border-white/50">
    <div class="max-w-6xl mx-auto px-5 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-rose-400 to-fuchsia-500 soft-shadow grid place-items-center">
          <span class="text-white font-bold">P</span>
        </div>
        <div>
          <div class="text-lg font-semibold text-rose-700">Portofolio Model</div>
          <div class="text-xs text-rose-600/70">Elegan • Pink • Minimal</div>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-2">
        <a href="#tentang" class="px-3 py-2 rounded-lg text-rose-700 hover:bg-rose-100 transition">Tentang</a>
        <a href="#galeri" class="px-3 py-2 rounded-lg text-rose-700 hover:bg-rose-100 transition">Galeri</a>
        <a href="#tambah" id="navTambah" class="px-4 py-2 rounded-lg bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn">Tambah Foto</a>
      </nav>
      <button id="mobileOpen" class="md:hidden p-2 rounded-lg text-rose-700 hover:bg-rose-100 btn" aria-label="Menu">
        <!-- burger -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>
    <!-- Mobile sheet -->
    <div id="mobileSheet" class="hidden md:hidden px-5 pb-4">
      <a href="#tentang" class="block px-3 py-2 rounded-lg text-rose-700 hover:bg-rose-100">Tentang</a>
      <a href="#galeri" class="block px-3 py-2 rounded-lg text-rose-700 hover:bg-rose-100">Galeri</a>
      <a href="#tambah" id="navTambahMobile" class="mt-2 block text-center px-4 py-2 rounded-lg bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn">Tambah Foto</a>
    </div>
  </header>

  <!-- Hero / Tentang -->
  <section id="tentang" class="relative">
    <div class="max-w-6xl mx-auto px-5 pt-10 lg:pt-14 pb-4">
      <div class="grid gap-6 items-stretch">
        <div class="glass rounded-2xl p-6 md:p-8 fade-in relative overflow-hidden">
          <h1 class="text-2xl md:text-4xl font-bold leading-tight text-rose-700">
            Halo, saya <span class="bg-gradient-to-r from-rose-500 to-fuchsia-600 bg-clip-text text-transparent">Model & Talent</span>
          </h1>
          <p class="mt-4 text-rose-900/80 leading-relaxed">
            Saya seorang model yang mencintai detail, pose yang bercerita, dan cahaya yang elegan.
            Portofolio ini menampilkan karya terbaik saya—mix editorial, beauty, dan lifestyle—dengan sentuhan pink yang lembut.
          </p>

          <div class="mt-6 flex flex-wrap items-center gap-3">
            <button id="toGaleri" class="px-5 py-3 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn soft-shadow">
              Lihat Galeri
            </button>
            <button id="openAdd1" class="px-5 py-3 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn">
              Tambah Foto
            </button>
          </div>
          <!-- Maskot kucing imut -->
          <div id="kittyMascot" class="pointer-events-none select-none absolute -right-2 -bottom-2 sm:right-3 sm:bottom-3 w-28 sm:w-32 opacity-0 translate-y-4">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
              <!-- Kepala -->
              <defs>
                <linearGradient id="kFace" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#fffafc"/>
                  <stop offset="100%" stop-color="#ffe6f0"/>
                </linearGradient>
              </defs>
              <g id="kitty">
                <ellipse cx="100" cy="105" rx="70" ry="60" fill="url(#kFace)" stroke="#333" stroke-width="2"/>
                <!-- Telinga -->
                <path d="M40 70 L30 35 L65 55 Z" fill="#fffafc" stroke="#333" stroke-width="2"/>
                <path d="M160 70 L170 35 L135 55 Z" fill="#fffafc" stroke="#333" stroke-width="2"/>
                <!-- Pita -->
                <g>
                  <circle cx="140" cy="65" r="10" fill="#ff3b8d" stroke="#333" stroke-width="2"/>
                  <ellipse cx="125" cy="60" rx="12" ry="9" fill="#ff7ab5" stroke="#333" stroke-width="2"/>
                  <ellipse cx="155" cy="70" rx="12" ry="9" fill="#ff7ab5" stroke="#333" stroke-width="2"/>
                </g>
                <!-- Mata & Hidung -->
                <circle cx="80" cy="105" r="4" fill="#333"/>
                <circle cx="120" cy="105" r="4" fill="#333"/>
                <ellipse cx="100" cy="117" rx="6" ry="5" fill="#ffbf47" stroke="#333" stroke-width="1"/>
                <!-- Kumis -->
                <g stroke="#333" stroke-width="2" stroke-linecap="round">
                  <line x1="55" y1="100" x2="75" y2="97"/>
                  <line x1="55" y1="110" x2="75" y2="110"/>
                  <line x1="55" y1="120" x2="75" y2="123"/>
                  <line x1="145" y1="100" x2="125" y2="97"/>
                  <line x1="145" y1="110" x2="125" y2="110"/>
                  <line x1="145" y1="120" x2="125" y2="123"/>
                </g>
                <!-- Tangan kanan (melambai) -->
                <g id="hand" transform="translate(150,125)">
                  <ellipse cx="0" cy="0" rx="12" ry="8" fill="#fffafc" stroke="#333" stroke-width="2"/>
                </g>
              </g>
            </svg>
          </div>
        </div>
    </div>
  </section>

  <!-- Controls -->
  <section id="galeri" class="mt-4">
    <div class="max-w-6xl mx-auto px-5">
      <div class="glass rounded-2xl p-5 md:p-6 fade-in">
        <div class="flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
          <div class="flex-1 flex gap-3">
            <div class="relative flex-1">
              <input id="searchInput" type="search" placeholder="Cari judul atau deskripsi..."
                     class="w-full px-4 py-3 pr-10 rounded-xl bg-white/80 ring-1 ring-white/60 focus:outline-none focus:ring-2 focus:ring-rose-300 text-rose-900 placeholder:text-rose-400"/>
              <span class="absolute right-3 top-1/2 -translate-y-1/2 text-rose-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-4.3-4.3M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0z"/></svg>
              </span>
            </div>
            <select id="sortSelect" class="px-4 py-3 rounded-xl bg-white/80 ring-1 ring-white/60 focus:outline-none focus:ring-2 focus:ring-rose-300 text-rose-700">
              <option value="new">Terbaru</option>
              <option value="old">Terlama</option>
              <option value="az">A → Z</option>
              <option value="za">Z → A</option>
            </select>
          </div>
          <div class="flex items-center gap-2">
            <button id="onlyFavBtn" class="px-4 py-3 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn tooltip" data-tip="Tampilkan favorit saja">
              <span class="inline-flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="#f59e0b"><path d="M11.48 3.5a1 1 0 0 1 1.04 0l2.64 1.52 2.99.6a1 1 0 0 1 .55 1.68l-2.1 2.26.42 3.03a1 1 0 0 1-1.43 1.04L12 12.83l-3.59 1.8a1 1 0 0 1-1.43-1.05l.42-3.02-2.1-2.26a1 1 0 0 1 .55-1.68l3-.6L11.48 3.5z"/></svg>
                Favorit
              </span>
            </button>
            <button id="openAdd2" class="px-4 py-3 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn soft-shadow">
              + Tambah Foto
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <main class="mt-5 pb-16">
    <div class="max-w-6xl mx-auto px-5">
      <div id="galleryGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
      <div id="emptyState" class="hidden glass rounded-2xl p-10 text-center mt-4">
        <div class="mx-auto w-16 h-16 rounded-2xl bg-gradient-to-br from-rose-400 to-fuchsia-500 grid place-items-center text-white soft-shadow">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor"><path d="M12 5v14m-7-7h14"/></svg>
        </div>
        <h3 class="mt-5 text-xl font-semibold text-rose-700">Belum ada foto</h3>
        <p class="mt-1 text-rose-900/70">Mulai tambahkan hasil pemotretan terbaikmu.</p>
        <button id="emptyAdd" class="mt-5 px-5 py-3 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn soft-shadow">Tambah Foto</button>
      </div>
    </div>
  </main>

  <!-- Add/Edit Modal -->
  <section id="modalOverlay" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 p-4">
    <div class="w-full max-w-xl rounded-2xl glass p-5 md:p-6 relative">
      <button id="modalClose" class="absolute right-3 top-3 p-2 rounded-lg text-rose-700 hover:bg-rose-100/70 btn" aria-label="Tutup">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg>
      </button>
      <h3 id="modalTitle" class="text-xl md:text-2xl font-semibold text-rose-700 pr-10">Tambah Foto</h3>
      <form id="photoForm" class="mt-4 space-y-4">
        <div>
          <label class="block text-sm text-rose-800 mb-1">Judul</label>
          <input id="f_title" type="text" class="w-full px-4 py-3 rounded-xl bg-white/80 ring-1 ring-white/60 focus:ring-2 focus:ring-rose-300 focus:outline-none" placeholder="Contoh: Editorial — Blossom">
        </div>
        <div>
          <label class="block text-sm text-rose-800 mb-1">Deskripsi (opsional)</label>
          <textarea id="f_desc" rows="3" class="w-full px-4 py-3 rounded-xl bg-white/80 ring-1 ring-white/60 focus:ring-2 focus:ring-rose-300 focus:outline-none" placeholder="Ceritakan konsep, mood, atau tim."></textarea>
        </div>
        <div class="grid md:grid-cols-[1fr_.88fr] gap-4">
          <div>
            <label class="block text-sm text-rose-800 mb-1">Unggah Foto</label>
            <input id="f_file" type="file" accept="image/*" class="block w-full text-sm text-rose-800 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-rose-100 file:text-rose-700 hover:file:bg-rose-200"/>
            <p class="text-xs text-rose-600/70 mt-1">PNG/JPG disarankan. Maksimal beberapa MB (tergantung browser).</p>
          </div>
          <div>
            <label class="block text-sm text-rose-800 mb-1">Pratinjau</label>
            <div class="aspect-[4/3] rounded-xl bg-white/70 ring-1 ring-white/60 grid place-items-center overflow-hidden">
              <img id="f_preview" alt="Pratinjau foto" class="max-h-full max-w-full object-contain hidden"/>
              <div id="f_placeholder" class="text-rose-400 text-sm">Belum ada gambar</div>
            </div>
          </div>
        </div>
        <div class="pt-1 flex items-center justify-between">
          <div id="formError" class="text-sm text-rose-700/90"></div>
          <div class="flex gap-2">
            <button type="button" id="modalCancel" class="px-4 py-3 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn">Batal</button>
            <button type="submit" class="px-5 py-3 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn soft-shadow">Simpan</button>
          </div>
        </div>
      </form>
      <input id="editId" type="hidden" />
    </div>
  </section>

  <!-- Lightbox Viewer -->
  <section id="viewerOverlay" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/70 p-4">
    <div class="w-full max-w-5xl grid lg:grid-cols-[1.2fr_.8fr] gap-4">
      <div class="rounded-2xl overflow-hidden bg-white/10">
        <img id="viewerImg" alt="Foto" class="w-full h-full object-contain bg-white/10">
      </div>
      <div class="glass rounded-2xl p-5 md:p-6 relative">
        <button id="viewerClose" class="absolute right-3 top-3 p-2 rounded-lg text-rose-700 hover:bg-rose-100/70 btn" aria-label="Tutup">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg>
        </button>
        <div class="pr-10">
          <h3 id="viewerTitle" class="text-xl md:text-2xl font-semibold text-rose-700">Judul</h3>
          <p id="viewerDesc" class="mt-1 text-rose-900/80 text-sm leading-relaxed">Deskripsi</p>
        </div>
        <div class="mt-4 flex flex-wrap items-center gap-2">
          <button id="viewerFav" class="px-4 py-2 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn inline-flex items-center gap-2">
            <svg id="viewerFavIcon" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24"><path fill="#f59e0b" d="M11.48 3.5a1 1 0 0 1 1.04 0l2.64 1.52 2.99.6a1 1 0 0 1 .55 1.68l-2.1 2.26.42 3.03a1 1 0 0 1-1.43 1.04L12 12.83l-3.59 1.8a1 1 0 0 1-1.43-1.05l.42-3.02-2.1-2.26a1 1 0 0 1 .55-1.68l3-.6L11.48 3.5z"/></svg>
            Favorit
          </button>
          <button id="viewerEdit" class="px-4 py-2 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn">Edit</button>
          <button id="viewerDelete" class="px-4 py-2 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn">Hapus</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Confirm Dialog -->
  <section id="confirmOverlay" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 p-4">
    <div class="w-full max-w-md rounded-2xl glass p-6">
      <h4 class="text-lg font-semibold text-rose-700">Hapus foto ini?</h4>
      <p class="text-rose-900/80 mt-1 text-sm">Tindakan ini tidak bisa dibatalkan.</p>
      <div class="mt-5 flex items-center justify-end gap-2">
        <button id="confirmCancel" class="px-4 py-2 rounded-xl bg-white text-rose-700 hover:bg-rose-50 ring-pink btn">Batal</button>
        <button id="confirmOk" class="px-4 py-2 rounded-xl bg-gradient-to-r from-rose-500 to-fuchsia-500 text-white btn">Hapus</button>
      </div>
    </div>
  </section>

  <footer class="mt-10 pb-10">
    <div class="max-w-6xl mx-auto px-5 text-center text-rose-700/70 text-sm">
      Dibuat dengan cinta dan warna pink. Foto disimpan secara lokal di perangkat Anda.
    </div>
  </footer>

  <script>
    // State
    const LS_KEY = 'portfolioGallery_v1';
    let items = [];
    let showOnlyFav = false;
    let currentSort = 'new';
    let currentSearch = '';
    let pendingDeleteId = null;
    let viewingId = null;

    // Elements
    const grid = document.getElementById('galleryGrid');
    const emptyState = document.getElementById('emptyState');
    const searchInput = document.getElementById('searchInput');
    const sortSelect = document.getElementById('sortSelect');
    const onlyFavBtn = document.getElementById('onlyFavBtn');
    // elemen profil dihapus
    const addButtons = [
      document.getElementById('openAdd1'),
      document.getElementById('openAdd2'),
      document.getElementById('navTambah'),
      document.getElementById('navTambahMobile'),
      document.getElementById('emptyAdd')
    ].filter(Boolean);
    const toGaleriBtn = document.getElementById('toGaleri');

    // Modal elements
    const modalOverlay = document.getElementById('modalOverlay');
    const modalTitle = document.getElementById('modalTitle');
    const modalClose = document.getElementById('modalClose');
    const modalCancel = document.getElementById('modalCancel');
    const photoForm = document.getElementById('photoForm');
    const f_title = document.getElementById('f_title');
    const f_desc  = document.getElementById('f_desc');
    const f_file  = document.getElementById('f_file');
    const f_preview = document.getElementById('f_preview');
    const f_placeholder = document.getElementById('f_placeholder');
    const formError = document.getElementById('formError');
    const editId = document.getElementById('editId');

    // Viewer
    const viewerOverlay = document.getElementById('viewerOverlay');
    const viewerImg = document.getElementById('viewerImg');
    const viewerTitle = document.getElementById('viewerTitle');
    const viewerDesc = document.getElementById('viewerDesc');
    const viewerClose = document.getElementById('viewerClose');
    const viewerFav = document.getElementById('viewerFav');
    const viewerFavIcon = document.getElementById('viewerFavIcon');
    const viewerEdit = document.getElementById('viewerEdit');
    const viewerDelete = document.getElementById('viewerDelete');

    // Confirm
    const confirmOverlay = document.getElementById('confirmOverlay');
    const confirmOk = document.getElementById('confirmOk');
    const confirmCancel = document.getElementById('confirmCancel');

    // Mobile nav
    const mobileOpen = document.getElementById('mobileOpen');
    const mobileSheet = document.getElementById('mobileSheet');

    // Utils
    const uid = () => Date.now().toString(36) + Math.random().toString(36).slice(2,8);
    function saveLS(){ localStorage.setItem(LS_KEY, JSON.stringify(items)); }
    function loadLS(){
      try {
        const raw = localStorage.getItem(LS_KEY);
        if(raw){
          const parsed = JSON.parse(raw);
          items = Array.isArray(parsed) ? parsed : (parsed.items || []);
        }
      } catch(e){ items = []; }
    }
    function placeholderSVG(title='MODEL'){
      const svg = `
        <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='900'>
          <defs>
            <linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
              <stop offset='0%' stop-color='#ffb3d9'/>
              <stop offset='100%' stop-color='#f72585'/>
            </linearGradient>
          </defs>
          <rect width='1200' height='900' fill='url(#g)'/>
          <circle cx='600' cy='360' r='120' fill='rgba(255,255,255,0.85)'/>
          <path d='M380,760c20-140,120-200,220-200s200,60,220,200v60H380Z' fill='rgba(255,255,255,0.85)'/>
          <text x='50%' y='860' text-anchor='middle' fill='rgba(127,29,29,0.5)' font-family='Poppins' font-weight='700' font-size='52'>${title}</text>
        </svg>`;
      return 'data:image/svg+xml;charset=UTF-8,'+encodeURIComponent(svg);
    }

    function seedIfEmpty(){
      if(items.length) return;
      items = [
        { id: uid(), title:'Editorial — Blossom', desc:'Mood lembut, pencahayaan natural.', image: placeholderSVG('EDITORIAL'), fav:true, createdAt: Date.now()-100000, updatedAt: Date.now()-100000 },
        { id: uid(), title:'Beauty — Rosé Glow', desc:'Close-up beauty dengan sentuhan pink.', image: placeholderSVG('BEAUTY'), fav:false, createdAt: Date.now()-80000, updatedAt: Date.now()-80000 },
        { id: uid(), title:'Lifestyle — Sunday', desc:'Gaya santai dengan latar urban.', image: placeholderSVG('LIFESTYLE'), fav:false, createdAt: Date.now()-60000, updatedAt: Date.now()-60000 },
      ];
      saveLS();
    }

    function applyFilters(list){
      let out = [...list];
      if(currentSearch.trim()){
        const q = currentSearch.toLowerCase();
        out = out.filter(it => (it.title||'').toLowerCase().includes(q) || (it.desc||'').toLowerCase().includes(q));
      }
      if(showOnlyFav){
        out = out.filter(it => !!it.fav);
      }
      switch(currentSort){
        case 'new': out.sort((a,b)=> b.createdAt - a.createdAt); break;
        case 'old': out.sort((a,b)=> a.createdAt - b.createdAt); break;
        case 'az': out.sort((a,b)=> (a.title||'').localeCompare(b.title||'')); break;
        case 'za': out.sort((a,b)=> (b.title||'').localeCompare(a.title||'')); break;
      }
      return out;
    }

    function toggleEmpty(show){
      emptyState.classList.toggle('hidden', !show);
    }

    // Card factory
    function createCard(item){
      const wrap = document.createElement('article');
      wrap.className = 'card-hover fade-in rounded-2xl overflow-hidden bg-white/70 ring-1 ring-white/60 soft-shadow';
      wrap.dataset.id = item.id;

      const media = document.createElement('div');
      media.className = 'relative aspect-[4/3] bg-gradient-to-b from-rose-100 to-pink-100';
      const img = document.createElement('img');
      img.src = item.image || placeholderSVG('MODEL');
      img.alt = item.title || 'Foto';
      img.className = 'absolute inset-0 w-full h-full object-cover';
      media.appendChild(img);

      const overlay = document.createElement('div');
      overlay.className = 'absolute inset-0 bg-gradient-to-t from-black/40 via-black/5 to-transparent opacity-0 hover:opacity-100 transition';
      media.appendChild(overlay);

      const quick = document.createElement('div');
      quick.className = 'absolute top-3 right-3 flex gap-2';
      quick.innerHTML = `
        <button class="favBtn p-2 rounded-xl bg-white/90 hover:bg-white btn tooltip" data-tip="Favorit" aria-label="Favorit">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"><path d="M11.48 3.5a1 1 0 0 1 1.04 0l2.64 1.52 2.99.6a1 1 0 0 1 .55 1.68l-2.1 2.26.42 3.03a1 1 0 0 1-1.43 1.04L12 12.83l-3.59 1.8a1 1 0 0 1-1.43-1.05l.42-3.02-2.1-2.26a1 1 0 0 1 .55-1.68l3-.6L11.48 3.5z" fill="${item.fav ? '#f59e0b' : '#e5e7eb'}"/></svg>
        </button>
        <button class="editBtn p-2 rounded-xl bg-white/90 hover:bg-white btn tooltip" data-tip="Edit" aria-label="Edit">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="#f43f5e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232 18.768 8.768M4 20h4l10.5-10.5a2 2 0 0 0-2.828-2.828L5.172 17.172 4 20z"/></svg>
        </button>
        <button class="delBtn p-2 rounded-xl bg-white/90 hover:bg-white btn tooltip" data-tip="Hapus" aria-label="Hapus">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" stroke="#ef4444" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 7h12M10 11v6m4-6v6M9 7l1-2h4l1 2m-9 0v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V7"/></svg>
        </button>
      `;
      media.appendChild(quick);

      const meta = document.createElement('div');
      meta.className = 'p-4';
      meta.innerHTML = `
        <h3 class="text-rose-800 font-semibold line-clamp-1">${item.title || 'Tanpa Judul'}</h3>
        <p class="text-rose-900/70 text-sm line-clamp-2 mt-1">${item.desc || ''}</p>
      `;

      // Events
      media.addEventListener('click', (e)=>{
        // ignore clicks on quick buttons
        if(e.target.closest('.favBtn') || e.target.closest('.editBtn') || e.target.closest('.delBtn')) return;
        openViewer(item.id);
      });
      quick.querySelector('.favBtn').addEventListener('click', (e)=>{
        e.stopPropagation();
        toggleFav(item.id, wrap);
      });
      quick.querySelector('.editBtn').addEventListener('click', (e)=>{
        e.stopPropagation();
        openEdit(item.id);
      });
      quick.querySelector('.delBtn').addEventListener('click', (e)=>{
        e.stopPropagation();
        askDelete(item.id);
      });

      wrap.appendChild(media);
      wrap.appendChild(meta);
      return wrap;
    }

    function renderGrid(){
      const list = applyFilters(items);
      grid.innerHTML = '';
      list.forEach(it => grid.appendChild(createCard(it)));
      toggleEmpty(list.length === 0);
    }

    // Favorites selective update
    function setCardFavIcon(cardEl, fav){
      const starPath = cardEl.querySelector('.favBtn svg path');
      if(starPath){ starPath.setAttribute('fill', fav ? '#f59e0b' : '#e5e7eb'); }
    }

    // CRUD helpers
    function addItem(data){
      items.push(data);
      saveLS();
      renderGrid();
    }
    function updateItem(id, patch){
      const i = items.findIndex(x=>x.id===id);
      if(i>=0){
        items[i] = {...items[i], ...patch, updatedAt: Date.now()};
        saveLS();
        renderGrid();
      }
    }
    function deleteItem(id){
      items = items.filter(x=>x.id!==id);
      saveLS();
      renderGrid();
    }
    function toggleFav(id, cardEl){
      const it = items.find(x=>x.id===id);
      if(!it) return;
      it.fav = !it.fav;
      it.updatedAt = Date.now();
      saveLS();
      // update icon immediately; if filtered view hides it, re-render
      if(showOnlyFav){
        renderGrid();
      }else if(cardEl){
        setCardFavIcon(cardEl, it.fav);
      }
      // also reflect in viewer if open
      if(viewingId === id){
        viewerFavIcon.querySelector('path')?.setAttribute('fill', it.fav ? '#f59e0b' : '#e5e7eb');
      }
    }

    // Modal logic
    function openAdd(){
      modalTitle.textContent = 'Tambah Foto';
      editId.value = '';
      f_title.value = '';
      f_desc.value = '';
      f_file.value = '';
      f_preview.src = '';
      f_preview.classList.add('hidden');
      f_placeholder.classList.remove('hidden');
      formError.textContent = '';
      modalOverlay.classList.remove('hidden');
      setTimeout(()=> modalOverlay.classList.add('flex'), 0);
    }
    function openEdit(id){
      const it = items.find(x=>x.id===id);
      if(!it) return;
      modalTitle.textContent = 'Edit Foto';
      editId.value = id;
      f_title.value = it.title || '';
      f_desc.value = it.desc || '';
      f_file.value = '';
      f_preview.src = it.image || '';
      f_preview.classList.remove('hidden');
      f_placeholder.classList.add('hidden');
      formError.textContent = '';
      modalOverlay.classList.remove('hidden');
      setTimeout(()=> modalOverlay.classList.add('flex'), 0);
    }
    function closeModal(){
      modalOverlay.classList.add('hidden');
      modalOverlay.classList.remove('flex');
    }

    // Viewer logic
    function openViewer(id){
      const it = items.find(x=>x.id===id);
      if(!it) return;
      viewingId = id;
      viewerImg.src = it.image || '';
      viewerTitle.textContent = it.title || 'Tanpa Judul';
      viewerDesc.textContent = it.desc || '';
      viewerFavIcon.querySelector('path')?.setAttribute('fill', it.fav ? '#f59e0b' : '#e5e7eb');
      viewerOverlay.classList.remove('hidden');
      setTimeout(()=> viewerOverlay.classList.add('flex'), 0);
    }
    function closeViewer(){
      viewerOverlay.classList.add('hidden');
      viewerOverlay.classList.remove('flex');
      viewingId = null;
    }

    // Confirm logic
    function askDelete(id){
      pendingDeleteId = id;
      confirmOverlay.classList.remove('hidden');
      setTimeout(()=> confirmOverlay.classList.add('flex'), 0);
    }
    function closeConfirm(){
      confirmOverlay.classList.add('hidden');
      confirmOverlay.classList.remove('flex');
      pendingDeleteId = null;
    }

    // Events
    photoForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      formError.textContent = '';

      const title = f_title.value.trim();
      const desc  = f_desc.value.trim();
      const isEdit = !!editId.value;

      function doneWith(imageDataURL){
        if(isEdit){
          updateItem(editId.value, { title, desc, image: imageDataURL ?? (items.find(x=>x.id===editId.value)?.image || '') });
        }else{
          if(!imageDataURL){
            formError.textContent = 'Mohon unggah foto terlebih dahulu.'; return;
          }
          addItem({ id: uid(), title, desc, image: imageDataURL, fav:false, createdAt: Date.now(), updatedAt: Date.now() });
        }
        closeModal();
      }

      if(!title){
        formError.textContent = 'Judul tidak boleh kosong.'; return;
      }

      const file = f_file.files && f_file.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = () => doneWith(reader.result);
        reader.onerror = () => { formError.textContent='Gagal membaca file.'; };
        reader.readAsDataURL(file);
      }else{
        // If adding new without file
        if(!isEdit){
          formError.textContent = 'Mohon unggah foto terlebih dahulu.'; return;
        }
        doneWith(undefined);
      }
    });

    f_file.addEventListener('change', ()=>{
      const file = f_file.files && f_file.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ()=>{
          f_preview.src = reader.result;
          f_preview.classList.remove('hidden');
          f_placeholder.classList.add('hidden');
        };
        reader.readAsDataURL(file);
      }else{
        f_preview.src = '';
        f_preview.classList.add('hidden');
        f_placeholder.classList.remove('hidden');
      }
    });

    modalClose.addEventListener('click', closeModal);
    modalCancel.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e)=>{ if(e.target===modalOverlay) closeModal(); });

    viewerClose.addEventListener('click', closeViewer);
    viewerOverlay.addEventListener('click', (e)=>{ if(e.target===viewerOverlay) closeViewer(); });
    viewerFav.addEventListener('click', ()=>{
      if(viewingId) toggleFav(viewingId);
    });
    viewerEdit.addEventListener('click', ()=>{
      if(viewingId){ closeViewer(); openEdit(viewingId); }
    });
    viewerDelete.addEventListener('click', ()=>{
      if(viewingId){ closeViewer(); askDelete(viewingId); }
    });

    confirmOk.addEventListener('click', ()=>{
      if(pendingDeleteId){ deleteItem(pendingDeleteId); }
      closeConfirm();
    });
    confirmCancel.addEventListener('click', closeConfirm);
    confirmOverlay.addEventListener('click', (e)=>{ if(e.target===confirmOverlay) closeConfirm(); });

    searchInput.addEventListener('input', ()=>{
      currentSearch = searchInput.value;
      renderGrid();
    });
    sortSelect.addEventListener('change', ()=>{
      currentSort = sortSelect.value;
      renderGrid();
    });
    onlyFavBtn.addEventListener('click', ()=>{
      showOnlyFav = !showOnlyFav;
      onlyFavBtn.classList.toggle('ring-pink', showOnlyFav);
      onlyFavBtn.classList.toggle('bg-rose-50', showOnlyFav);
      renderGrid();
    });

    addButtons.forEach(btn => btn.addEventListener('click', openAdd));
    toGaleriBtn?.addEventListener('click', ()=> {
      document.querySelector('#galeri')?.scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Mobile menu
    mobileOpen?.addEventListener('click', ()=>{
      mobileSheet.classList.toggle('hidden');
    });

    // Hash links smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        if(id && id.length>1){
          e.preventDefault();
          document.querySelector(id)?.scrollIntoView({behavior:'smooth', block:'start'});
          mobileSheet?.classList.add('hidden');
        }
      });
    });

    // Init
    loadLS();
    seedIfEmpty();

    renderGrid();

    // Tampilkan maskot Hello Kitty sebentar, lambaikan tangan, lalu hilang
    const kitty = document.getElementById('kittyMascot');
    if(kitty){
      const play = ()=>{
        kitty.classList.add('kitty-in');
        const hand = kitty.querySelector('#hand');
        hand?.classList.add('wave');
        // sembunyikan lagi setelah 4 detik
        setTimeout(()=>{
          kitty.classList.remove('kitty-in');
          hand?.classList.remove('wave');
        }, 3500);
      };
      // mainkan sekali saat load, lalu ulang tiap 12 detik
      setTimeout(play, 600);
      setInterval(play, 12000);
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'981e6e5be1f8394e',t:'MTc1ODM0MDk4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

